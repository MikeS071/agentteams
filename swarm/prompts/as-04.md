# AS-04: Agent mode selection — tile click enters agent mode

## Scope
When a user clicks an agent tile (e.g. "Research Assistant"), they enter that agent's MODE. The entire chat area transforms based on the selected agent type.

## Current behavior
- Clicking an agent tile selects it and the chat area shows a generic chat UI
- Agent grid is always visible

## New behavior
- Clicking an agent tile enters "agent mode" for that agent
- The agent grid collapses/minimizes to a small selector (horizontal strip with icons at top, or a dropdown)
- The main area becomes the agent-specific layout (defined in as-06 through as-11)
- A "Back to agents" or "Switch agent" button is visible to return to the full grid

## Implementation

### State
```typescript
const [activeMode, setActiveMode] = useState<string | null>(null);
```

### Layout wrapper component
Create `apps/web/src/components/AgentModeLayout.tsx`:
```typescript
type Props = {
  agentId: string;
  chatPanel: React.ReactNode;
  sidePanel?: React.ReactNode;
  splitRatio?: string; // e.g. "1fr 1fr" or "1fr" for full chat
};
```

This component renders:
- Full width if no sidePanel (Coder, General Chat)
- 50/50 split if sidePanel provided (Research, Intel, Social, Clip)

### Agent mode selector (minimized)
Create `apps/web/src/components/AgentModeSelector.tsx`:
- Horizontal strip of agent icons at the top of the chat area
- Clicking an icon switches agent mode
- Active agent is highlighted

## Rules
- The chat messages should persist when switching agents (don't clear on switch)
- The agent's system prompt should update when switching
- Branch: `feat/as-04`
- Commit: `feat: agent mode selection — tile enters agent mode`
- Verify build passes
