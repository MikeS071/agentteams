# AS-16: Swarm status TUI rendered in chat side panel + Swarm workspace tab

## Scope
When a user runs an agent-swarm for a task, the swarm status should render:
1. As a **side panel in the chat UI** (when an agent triggers a swarm)
2. In the **Swarm workspace tab** (`/dashboard/swarm`)

Both views show the same data â€” a real-time ticket tracker matching the `agent-swarm status --watch` TUI.

## Swarm Status Component
Create `apps/web/src/components/SwarmStatus.tsx`:

### Props
```typescript
type SwarmStatusProps = {
  projectName?: string;  // filter to specific project
  compact?: boolean;     // compact mode for side panel
};
```

### Display
- **Header:** Project name, active phase, stats bar (done/running/todo/failed)
- **Ticket table/list:**
  - Each ticket: ID, phase, status badge, description
  - Status colors: done=green, running=blue+pulse, todo=gray, failed=red
  - Running tickets show elapsed time
  - Expandable: click to see agent output (last few lines)
- **Progress bar:** overall % complete (done/total)
- **Phase indicator:** visual phase progression (Phase 1 âœ… â†’ Phase 2 ðŸ”„ â†’ Phase 3 â¬š)

### Compact mode (for chat side panel)
- No table headers, tighter spacing
- Just: ticket ID + status icon + short desc
- Collapsed by default, expandable

### Data source
- Poll `GET /api/swarm/status` every 5 seconds (or SSE if available)
- API reads from the swarm tracker.json on the server

## API endpoint
Create `apps/web/src/app/api/swarm/status/route.ts`:
- GET: reads swarm tracker state
- Query params: `?project=<name>` to filter
- Returns: `{ project, phase, stats: {done,running,todo,failed,total}, tickets: [...] }`
- Server-side: reads tracker JSON from the tenant's project directory
- For now, hardcode the path or read from a config

## Chat integration
In the chat page (`apps/web/src/app/dashboard/chat/page.tsx`):
- When the assistant sends a message containing a swarm status update (JSON block with `type: "swarm_status"`), render `<SwarmStatus compact />` in a collapsible side panel
- The side panel appears on the right, alongside the chat

## Swarm workspace tab
Update `apps/web/src/app/dashboard/swarm/page.tsx`:
- Render `<SwarmStatus />` (full mode) as the main content
- Add project selector dropdown if multiple projects exist
- Add "Approve Phase Gate" button (calls POST to approve)

## Styling
- Dark theme: bg-[#0d0d14], status badges with colored borders
- Running animation: subtle pulse on running ticket rows
- Phase bar: horizontal steps with connecting line

## Rules
- Branch: `feat/as-16`
- Commit: `feat: swarm status TUI in chat panel + swarm workspace tab`
- Verify build passes
